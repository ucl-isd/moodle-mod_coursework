{{! called from templates/submissions/tr }}
<div class="dropdown coursework-actions">
    <button class="btn btn-outline-primary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Edit
    </button>
    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
        {{#coursework.defaultduedate}}
            {{#coursework.personal_deadlines_enabled}}
                {{! Not editable if an extension exists for this user }}
                {{#personaldeadline}}
                    <a class="dropdown-item{{^is_editable}} disabled{{/is_editable}}"
                       href="{{config.wwwroot}}/mod/coursework/actions/personal_deadline.php?allocatableid={{#submissiontype.user}}{{submissiontype.user.id}}{{/submissiontype.user}}{{#group}}{{group.id}}{{/group}}&allocatabletype={{#submissiontype.user}}user{{/submissiontype.user}}{{#group}}group{{/group}}&courseworkid={{coursework.id}}"
                        data-action="mod-coursework-launch-modal-personal-deadline"
                        data-coursework-id="{{coursework.id}}"
                        data-allocatable-id="{{extension.extensionparams.allocatableid}}"
                        data-allocatable-type="{{extension.extensionparams.allocatabletype}}"
                        {{#deadlineid}}data-deadline-id="{{deadlineid}}"{{/deadlineid}}>
                        {{^is_editable}}<i class="fa fa-fw fa-lock mr-1"></i>{{/is_editable}}
                        {{#exists}}
                            {{#str}}personal_deadline, coursework{{/str}}
                            <small class="actions-extension-date-container {{#personaldeadline.date}}d-block{{/personaldeadline.date}} {{^personaldeadline.date}}d-none{{/personaldeadline.date}}">
                                <i class="fa-solid fa-circle-check text-{{#is_editable}}primary{{/is_editable}}{{^is_editable}}secondary{{/is_editable}} mr-2"></i>
                                <span class="sr-only">Extension granted date </span>
                                <span class="actions-extension-date">
                                    {{#personaldeadline.date}}
                                        {{#userdate}}{{personaldeadline.date}},{{#str}}strftimedatetime, langconfig{{/str}}{{/userdate}}
                                    {{/personaldeadline.date}}
                                </span>
                            </small>
                        {{/exists}}
                        {{^exists}}{{#str}}personal_deadline, coursework{{/str}}{{/exists}}
                    </a>
                    <div class="dropdown-divider"></div>
                {{/personaldeadline}}
            {{/coursework.personal_deadlines_enabled}}
            {{#extension.show}}
                <a class="dropdown-item {{extension.class}}"
                   href="{{extension.url}}"
                   data-action="mod-coursework-launch-modal-extension"
                   data-coursework-id="{{coursework.id}}"
                   {{#extension.id}}data-extension-id="{{extension.id}}"{{/extension.id}}
                   data-allocatable-id="{{extension.extensionparams.allocatableid}}"
                   data-allocatable-type="{{extension.extensionparams.allocatabletype}}"
                >{{#str}}submissionextension, mod_coursework{{/str}}
                    <small class="actions-extension-date-container {{#extension.date}}d-block{{/extension.date}} {{^extension.date}}d-none{{/extension.date}}">
                        <i class="fa-solid fa-circle-check text-success mr-2"></i>
                        <span class="sr-only">Extension granted date </span>
                        <span class="actions-extension-date">
                            {{#extension.date}}
                                {{#userdate}}{{extension.date}},{{#str}}strftimedatetime, langconfig{{/str}}{{/userdate}}
                            {{/extension.date}}
                        </span>
                    </small>
                </a>
                {{#submission.url}}<div class="dropdown-divider"></div>{{/submission.url}}
                {{#finalise}}<div class="dropdown-divider"></div>{{/finalise}}
                {{#unfinalise}}<div class="dropdown-divider"></div>{{/unfinalise}}
                {{#plagarism.url}}<div class="dropdown-divider"></div>{{/plagarism.url}}
            {{/extension.show}}
        {{/coursework.defaultduedate}}
        {{#submission.url}}
            <a class="dropdown-item submit-on-behalf" href="{{submission.url}}">{{submission.label}}</a>
            {{#finalise}}<div class="dropdown-divider"></div>{{/finalise}}
            {{#unfinalise}}<div class="dropdown-divider"></div>{{/unfinalise}}
            {{#plagarism.url}}<div class="dropdown-divider"></div>{{/plagarism.url}}
        {{/submission.url}}
        {{#finalise}}
            <a class="dropdown-item submission-finalisation" data-action="finalise" data-student="{{studentname}}" href="{{finalise.url}}">Finalise submission</a>
            {{#unfinalise}}<div class="dropdown-divider"></div>{{/unfinalise}}
            {{#plagarism.url}}<div class="dropdown-divider"></div>{{/plagarism.url}}
        {{/finalise}}
        {{#unfinalise}}
             <a class="dropdown-item submission-finalisation" data-action="unfinalise" data-student="{{studentname}}" href="{{unfinalise.url}}">Unfinalise submission</a>
            {{#plagarism.url}}<div class="dropdown-divider"></div>{{/plagarism.url}}
        {{/unfinalise}}
        {{#plagarism.url}}
            <a class="dropdown-item" href="{{plagarism.url}}">Plagarism
                {{#plagarismstatus}}
                    <small class="d-block">
                        <i class="fa-solid fa-triangle-exclamation text-danger mr-2"></i>
                        <span class="sr-only">Flagged for plagiarism status </span>
                        {{.}}
                    </small>
                {{/plagarismstatus}}
            </a>
        {{/plagarism.url}}
<!--        <a class="dropdown-item" href="#">Release mark</a>-->
    </div>
</div>
