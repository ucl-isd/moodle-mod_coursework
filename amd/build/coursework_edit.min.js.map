{"version":3,"file":"coursework_edit.min.js","sources":["../src/coursework_edit.js"],"sourcesContent":["define('mod_coursework/coursework_edit',\n    ['jquery', 'core/notification', 'core/modal'], function($, Notification, Modal) {\n    return {\n        init: function() {\n// Add the init function:\n            /**\n             *\n             * @param {object} row\n             * @returns {boolean}\n             */\n            function compare_row(row) {\n                return (this == row.DT_RowId);\n            }\n\n\n            var now = new Date();\n            var extension_form_change = false;\n            window.addEventListener('beforeunload', (table_obj_list) => {\n                if (table_obj_list) {\n                    for (var table_id in table_obj_list) {\n                        table_obj_list[table_id].state.save();\n                    }\n                }\n            });\n            $(document).ready(function() {\n                /**\n                 *\n                 * @param {object} tr\n                 */\n                function log_datatable_navigate(tr) {\n                    var row_id = tr.attr('id');\n                    var tableid = tr.closest('table').attr('id');\n                    var key = 'datatable_navigate_' + window.location.href + tableid;\n                    localStorage.setItem(key, row_id);\n                }\n\n                /* plagiarism flag */\n                $('.datatabletest').on('click', '.new_plagiarism_flag', function() {\n                    log_datatable_navigate($(this).closest('tr'));\n                });\n\n                $('.datatabletest').on('click', '.edit_plagiarism_flag', function() {\n                    log_datatable_navigate($(this).closest('tr'));\n                });\n\n                /* feedback */\n                $('.datatabletest').on('click', '.new_final_feedback', function() {\n                    log_datatable_navigate($(this).closest('tr'));\n                });\n\n                $('.datatabletest').on('click', '.edit_final_feedback', function() {\n                    log_datatable_navigate($(this).closest('tr'));\n                });\n\n                $('.datatabletest').on('click', '.show_feedback', function() {\n                    log_datatable_navigate($(this).closest('tr'));\n                });\n\n                /* assessor feedback */\n                $('.datatabletest').on('click', '.assessor_feedback_grade .new_feedback', function() {\n                    log_datatable_navigate($(this).closest('td.assessors').closest('table.assessors').closest('tr').prev());\n                });\n\n                $('.datatabletest').on('click', '.assessor_feedback_grade .show_feedback', function() {\n                    log_datatable_navigate($(this).closest('td.assessors').closest('table.assessors').closest('tr').prev());\n                });\n\n                $('.datatabletest').on('click', '.assessor_feedback_grade .edit_feedback', function() {\n                    log_datatable_navigate($(this).closest('td.assessors').closest('table.assessors').closest('tr').prev());\n                });\n\n                /* deadline extension */\n                $('.datatabletest').on('click', '.new_deadline_extension', function() {\n                    log_datatable_navigate($(this).closest('tr'));\n                });\n\n                $('.datatabletest').on('click', '.edit_deadline_extension', function() {\n                    log_datatable_navigate($(this).closest('tr'));\n                });\n\n                /* submission */\n                $('.datatabletest').on('click', '.new_submission', function() {\n                    log_datatable_navigate($(this).closest('tr'));\n                });\n\n                // Prepare Message\n                var datatables_lang_messages = JSON.parse($('#datatables_lang_messages').attr('data-lang'));\n\n                /**\n                 * Personal Deadline\n                 */\n                $('.datatabletest').on('click', '.edit_personal_deadline',function(e) {\n                    e.preventDefault();\n                    var parent = $(this).closest('.personal_deadline_cell');\n                    parent.children('.show_personal_dealine').addClass('display-none');\n                    var change_form = parent.children('.show_edit_personal_dealine');\n                    var data_get = $(this).attr('data-get');\n                    var data_time = $(this).attr('data-time-iso-8601');\n                    if (change_form.html().length === 1) {\n                        var form = '<input type=\"datetime-local\" step=\"300\" class=\"input-personal-deadline\"' +\n                            ' value=\"' + data_time + '\">';\n                        form += '<div class=\"personal_deadline_button\"><a href=\"/\" class=\"approve-personal-deadline\" data-get=';\n                        form += data_get;\n                        form += '><i class=\"fa fa-check\" aria-hidden=\"true\"></i></a>';\n                        form += '<a href=\"/\" class=\"cancel-personal-deadline\"><i class=\"fa fa-times\" aria-hidden=\"true\">' +\n                            '</i></a></div>';\n                        $(change_form).html(form);\n                    }\n                    $(change_form).removeClass('display-none');\n                });\n\n                $('.datatabletest').on('click', '.cancel-personal-deadline', function(e) {\n                    e.preventDefault();\n                    $(this).closest('.show_edit_personal_dealine').addClass('display-none');\n                    $(this).closest('.personal_deadline_cell').children('.show_personal_dealine').removeClass('display-none');\n                });\n\n                $('.datatabletest').on('click', '.approve-personal-deadline', function(e) {\n                    e.preventDefault();\n                    var deadline = $(this);\n                    var data_get = $(deadline).attr('data-get');\n                    var value = $(deadline).closest('.show_edit_personal_dealine').children('.input-personal-deadline').val();\n                    var input_date = new Date(value);\n                    if (input_date <= Date.parse(now)) {\n                        Modal.create({\n                            title: datatables_lang_messages.notification_info,\n                            body: datatables_lang_messages.alert_validate_deadline.replace(/\\_/g, ' '),\n                            show: true,\n                            removeOnClose: true,\n                        });\n                    }\n\n                    var url = datatables_lang_messages.url_root + \"/mod/coursework/actions/personal_deadline.php\";\n                    var param = JSON.parse(data_get);\n                    param.personal_deadline_time = value;\n\n                    $.ajax({\n                        type: \"POST\",\n                        url: url,\n                        data: param,\n                        beforeSend: function() {\n                            $('html, body').css(\"cursor\", \"wait\");\n                            $(self).prev('img').css('visibility', 'visible');\n                        },\n                        success: function(response, table_obj_list) {\n                            $('html, body').css(\"cursor\", \"auto\");\n                            var data_response = JSON.parse(response);\n                            if (data_response.error === 1) {\n                                Modal.create({\n                                    title: datatables_lang_messages.notification_info,\n                                    body: data_response.message,\n                                    show: true,\n                                    removeOnClose: true,\n                                });\n                            } else {\n                                var parent = $(deadline).closest('.personal_deadline_cell');\n                                $(parent).attr('data-order', data_response.timestamp);\n                                var table = table_obj_list[Object.keys(table_obj_list)[0]];\n                                table.row('#' + $(parent).closest('tr').attr('id')).invalidate();\n\n                                $(parent).children('.show_personal_dealine').children('.content_personal_deadline').\n                                html(data_response.time);\n                                $(parent).children('.show_edit_personal_dealine').addClass('display-none');\n                                $(parent).children('.show_personal_dealine').removeClass('display-none');\n                                Modal.create({\n                                    title: datatables_lang_messages.notification_info,\n                                    body: datatables_lang_messages.alert_personaldeadline_save_successful.replace(/\\_/g, ' '),\n                                    show: true,\n                                    removeOnClose: true,\n                                });\n                            }\n                        },\n                        error: function() {\n                            $('html, body').css(\"cursor\", \"auto\");\n                        },\n                        complete: function() {\n                            $('html, body').css(\"cursor\", \"auto\");\n                        }\n                    });\n\n                });\n\n                /***************************\n                 * Extensions\n                 */\n\n                /**\n                 * Add new extension\n                 */\n                $('.datatabletest').on('click', '.new_deadline_extension', function(e) {\n                    e.preventDefault();\n                    var data_name = $(this).attr('data-name');\n                    var data_params = JSON.parse($(this).attr('data-params'));\n                    var data_time = JSON.parse($(this).attr('data-time'));\n                    var current_rowid = $(this).closest('tr').attr('id');\n                    extension_new_change_data_form(data_name, data_params, data_time, current_rowid);\n                    $('#modal-ajax').modal('show');\n                });\n\n                /**\n                 * Edit extensions\n                 */\n                $('.datatabletest').on('click', '.edit_deadline_extension', function(e) {\n\n                    e.preventDefault();\n                    var data_name = $(this).attr('data-name');\n                    var data_params = JSON.parse($(this).attr('data-params'));\n                    var data_time = JSON.parse($(this).attr('data-time'));\n                    var current_rowid = $(this).closest('tr').attr('id');\n                    extension_edit_change_data_form(data_name, data_params, data_time, current_rowid);\n                    $('#modal-ajax').modal('show');\n                });\n\n                /**\n                 * Submit save extension\n                 */\n                $('.modal-footer').on('click', '#extension-submit', function(e) {\n                    e.preventDefault();\n                    var params = {};\n                    params.allocatabletype = $('#extension-allocatabletype').val();\n                    params.allocatableid = $('#extension-allocatableid').val();\n                    params.courseworkid = $('#extension-courseworkid').val();\n                    params.id = $('#extension-id').val();\n                    params.extended_deadline = $('#extension-extend-deadline').val();\n                    params.editor = $('#extension-time-content').html();\n                    params.text = $('#id_extra_information').val();\n                    params.submissionid = $('#extension-submissionid').val();\n                    params.pre_defined_reason = $('#extension-reason-select').val();\n                    params.requesttype = 'submit';\n                    var current_rowid = $('#button-id').val();\n                    var url = datatables_lang_messages.url_root;\n                    $.ajax({\n                        type: \"POST\",\n                        url: url + \"/mod/coursework/actions/ajax/deadline_extension/submit.php\",\n                        data: params,\n                        beforeSend: function() {\n                            $('html, body').css(\"cursor\", \"wait\");\n                            $('.modal-footer').children('img').css('visibility', 'visible');\n                        },\n                        success: function(response, table_obj_list) {\n                            var data_response = JSON.parse(response);\n                            $('html, body').css(\"cursor\", \"auto\");\n                            $('.modal-footer').children('img').css('visibility', 'hidden');\n                            if (data_response.error == 1) {\n                                Modal.create({\n                                    title: datatables_lang_messages.notification_info,\n                                    body: data_response.messages,\n                                    show: true,\n                                    removeOnClose: true,\n                                });\n                            } else {\n                                if (Object.keys(table_obj_list).length > 0) {\n                                    // Get the first datatable object.\n                                    var table = table_obj_list[Object.keys(table_obj_list)[0]];\n                                    if (table.row) {\n                                        var current_row_data = table.row('#' + current_rowid).data();\n                                        var submissiondateindex = table.column('.tableheaddate').index();\n                                        var current_moderation_cell_data = data_response.content;\n                                        current_row_data[submissiondateindex] = current_moderation_cell_data;\n                                        var table_row = table.row('#' + current_rowid);\n                                        table_row.data(current_row_data);\n                                        var dom_row = $('#' + current_rowid);\n                                        dom_row.find('.time_submitted_cell').attr('data-order',\n                                            current_moderation_cell_data['@data-order']);\n                                        dom_row.find('.edit_personal_deadline').remove();\n                                        table_row.invalidate();\n                                        $('#extension-id').val(data_response.data.id);\n                                    }\n                                }\n\n                                change__status_extension_submit_button(true);\n                                save_extension_form_data();\n\n                                Modal.create({\n                                    title: datatables_lang_messages.notification_info,\n                                    body: datatables_lang_messages.alert_extension_save_successful.replace(/\\_/g, ' '),\n                                    show: true,\n                                    removeOnClose: true,\n                                });\n\n                            }\n                        },\n                        error: function() {\n                            $('html, body').css(\"cursor\", \"auto\");\n                        },\n                        complete: function() {\n                            $('html, body').css(\"cursor\", \"auto\");\n                        }\n                    });\n                });\n\n\n                /**\n                 * Function close button\n                 */\n                $('#modal-ajax').on('hide.bs.modal', function() {\n                    var self = this;\n                    if (is_data_extension_form_change()) {\n                        var confirm = new M.core.confirm({\n                            title: datatables_lang_messages.notification_leave_form_title.replace(/\\_/g, ' '),\n                            question: datatables_lang_messages.notification_leave_form_message.replace(/\\_/g, ' '),\n                            yesLabel: datatables_lang_messages.notification_yes_label,\n                            noLabel: datatables_lang_messages.notification_no_label,\n                        });\n\n                        confirm.on('complete-yes',function() {\n                            save_extension_form_data();\n                            confirm.hide();\n                            confirm.destroy();\n                            $(self).modal('hide');\n                        });\n\n                        confirm.on('complete-no',function() {\n                            confirm.hide();\n                            confirm.destroy();\n                            return false;\n                        });\n\n                        confirm.show();\n                        return false;\n                    }\n                    return true;\n                });\n\n                /**\n                 * Function next button\n                 */\n                $('.modal-footer').on('click', '#extension-next', function(e, table_obj_list) {\n                    e.preventDefault();\n\n                    if (is_data_extension_form_change()) {\n                        var confirm = new M.core.confirm({\n                            title: datatables_lang_messages.notification_leave_form_title.replace(/\\_/g, ' '),\n                            question: datatables_lang_messages.notification_leave_form_message.replace(/\\_/g, ' '),\n                            yesLabel: datatables_lang_messages.notification_yes_label,\n                            noLabel: datatables_lang_messages.notification_no_label,\n                        });\n\n                        confirm.on('complete-yes', function(table_obj_list) {\n                            confirm.hide();\n                            confirm.destroy();\n                            if (Object.keys(table_obj_list).length > 0) {\n\n                                var prev_rowid = $('#button-id').val();\n\n                                // Get the first datatable object.\n                                var table = table_obj_list[Object.keys(table_obj_list)[0]];\n\n                                var prev_row_index = table.row('#' + prev_rowid).index();\n\n\n                                var current_row_index = prev_row_index + 1;\n\n                                if (table.row(current_row_index)) {\n                                    var current_row_data = table.row(current_row_index).data();\n                                    if (current_row_data) {\n                                        var current_rowid = table.row(current_row_index).id();\n\n                                        var submissiondateindex = table.column('.tableheaddate').index();\n                                        var current_cell_data = current_row_data[submissiondateindex];\n                                        if (current_cell_data) {\n                                            var tmp_node = $('<div/>').html(current_cell_data.display);\n                                            var submisiondate = $(tmp_node).find('.new_deadline_extension');\n                                            if (submisiondate.length > 0) {\n                                                var data_params = JSON.parse(submisiondate.attr('data-params'));\n                                                var data_name = submisiondate.attr('data-name');\n                                                var data_time = JSON.parse(submisiondate.attr('data-time'));\n                                                extension_new_change_data_form(data_name, data_params, data_time, current_rowid);\n                                            } else {\n                                                submisiondate = $(tmp_node).find('.edit_deadline_extension');\n                                                var data_params = JSON.parse(submisiondate.attr('data-params'));\n                                                var data_name = submisiondate.attr('data-name');\n                                                var data_time = JSON.parse(submisiondate.attr('data-time'));\n                                                extension_edit_change_data_form(data_name, data_params, data_time, current_rowid);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        $('#extension-next').prop('disabled', true);\n                                        Modal.create({\n                                            title: datatables_lang_messages.notification_info,\n                                            body: datatables_lang_messages.alert_no_extension.replace(/\\_/g, ' '),\n                                            show: true,\n                                            removeOnClose: true,\n                                        });\n                                    }\n                                }\n                            }\n                        });\n\n                        confirm.on('complete-no', function() {\n                            confirm.hide();\n                            confirm.destroy();\n\n                        });\n\n                        confirm.show();\n                    } else {\n                        if (Object.keys(table_obj_list).length > 0) {\n\n                            var prev_rowid = $('#button-id').val();\n\n                            // Get the first datatable object.\n                            var table = table_obj_list[Object.keys(table_obj_list)[0]];\n\n                            var ordereddata = table.rows({order: 'applied', search: 'applied'}).data().toArray();\n                            var prev_row_index = ordereddata.findIndex(compare_row, prev_rowid);\n\n\n                            var current_row_index = prev_row_index + 1;\n\n                            if (table.row(current_row_index)) {\n                                var current_row_data = ordereddata[current_row_index];\n                                if (typeof current_row_data != 'undefined') {\n                                    var current_rowid = current_row_data.DT_RowId;\n\n                                    var submissiondateindex = table.column('.tableheaddate').index();\n                                    var current_cell_data = current_row_data[submissiondateindex];\n                                    if (current_cell_data) {\n                                        var tmp_node = $('<div/>').html(current_cell_data.display);\n                                        var submisiondate = $(tmp_node).find('.new_deadline_extension');\n                                        if (submisiondate.length > 0) {\n                                            var data_params = JSON.parse(submisiondate.attr('data-params'));\n                                            var data_name = submisiondate.attr('data-name');\n                                            var data_time = JSON.parse(submisiondate.attr('data-time'));\n                                            extension_new_change_data_form(data_name, data_params, data_time, current_rowid);\n                                        } else {\n                                            submisiondate = $(tmp_node).find('.edit_deadline_extension');\n                                            var data_params = JSON.parse(submisiondate.attr('data-params'));\n                                            var data_name = submisiondate.attr('data-name');\n                                            var data_time = JSON.parse(submisiondate.attr('data-time'));\n                                            extension_edit_change_data_form(data_name, data_params, data_time, current_rowid);\n                                        }\n                                    }\n                                }\n                                else {\n                                    $('#extension-next').prop('disabled', true);\n                                    Modal.create({\n                                        title: datatables_lang_messages.notification_info,\n                                        body: datatables_lang_messages.alert_no_mitigation.replace(/\\_/g, ' '),\n                                        show: true,\n                                        removeOnClose: true,\n                                    });\n                                }\n                            }\n                        }\n                    }\n\n\n                });\n\n                /**\n                 * Function back button\n                 */\n                $('.modal-footer').on('click', '#extension-back', function(e, table_obj_list) {\n                    e.preventDefault();\n                    if (is_data_extension_form_change()) {\n                        var confirm = new M.core.confirm({\n                            title: datatables_lang_messages.notification_leave_form_title.replace(/\\_/g, ' '),\n                            question: datatables_lang_messages.notification_leave_form_message.replace(/\\_/g, ' '),\n                            yesLabel: datatables_lang_messages.notification_yes_label,\n                            noLabel: datatables_lang_messages.notification_no_label,\n                        });\n\n                        confirm.on('complete-yes', function(table_obj_list) {\n                            confirm.hide();\n                            confirm.destroy();\n                            if (Object.keys(table_obj_list).length > 0) {\n\n                                var prev_rowid = $('#button-id').val();\n\n                                // Get the first datatable object.\n                                var table = table_obj_list[Object.keys(table_obj_list)[0]];\n\n                                var prev_row_index = table.row('#' + prev_rowid).index();\n\n\n                                var current_row_index = prev_row_index - 1;\n\n                                if (table.row(current_row_index)) {\n                                    var current_row_data = table.row(current_row_index).data();\n                                    if (current_row_data) {\n                                        var current_rowid = table.row(current_row_index).id();\n\n                                        var submissiondateindex = table.column('.tableheaddate').index();\n                                        var current_cell_data = current_row_data[submissiondateindex];\n                                        if (current_cell_data) {\n                                            var tmp_node = $('<div/>').html(current_cell_data.display);\n                                            var submisiondate = $(tmp_node).find('.new_deadline_extension');\n                                            if (submisiondate.length > 0) {\n                                                var data_params = JSON.parse(submisiondate.attr('data-params'));\n                                                var data_name = submisiondate.attr('data-name');\n                                                var data_time = JSON.parse(submisiondate.attr('data-time'));\n                                                extension_new_change_data_form(data_name, data_params, data_time, current_rowid);\n                                            } else {\n                                                submisiondate = $(tmp_node).find('.edit_deadline_extension');\n                                                var data_params = JSON.parse(submisiondate.attr('data-params'));\n                                                var data_name = submisiondate.attr('data-name');\n                                                var data_time = JSON.parse(submisiondate.attr('data-time'));\n                                                extension_edit_change_data_form(data_name, data_params, data_time, current_rowid);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        $('#extension-back').prop('disabled', true);\n                                        Modal.create({\n                                            title: datatables_lang_messages.notification_info,\n                                            body: datatables_lang_messages.alert_no_mitigation.replace(/\\_/g, ' '),\n                                            show: true,\n                                            removeOnClose: true,\n                                        });\n                                    }\n                                }\n                            }\n                        });\n\n                        confirm.on('complete-no', function() {\n                            confirm.hide();\n                            confirm.destroy();\n                        });\n\n                        confirm.show();\n                    } else {\n                        if (Object.keys(table_obj_list).length > 0) {\n\n                            var prev_rowid = $('#button-id').val();\n\n                            // Get the first datatable object.\n                            var table = table_obj_list[Object.keys(table_obj_list)[0]];\n\n                            var ordereddata = table.rows( { order: 'applied', search: 'applied' } ).data().toArray();\n                            var prev_row_index = ordereddata.findIndex(compare_row, prev_rowid);\n\n\n                            var current_row_index = prev_row_index - 1;\n\n                            if (table.row(current_row_index)) {\n                                var current_row_data = ordereddata[current_row_index];\n                                if (typeof current_row_data != 'undefined') {\n                                    var current_rowid = current_row_data.DT_RowId;\n\n                                    var submissiondateindex = table.column('.tableheaddate').index();\n                                    var current_cell_data = current_row_data[submissiondateindex];\n                                    if (current_cell_data) {\n                                        var tmp_node = $('<div/>').html(current_cell_data.display);\n                                        var submisiondate = $(tmp_node).find('.new_deadline_extension');\n                                        if (submisiondate.length > 0) {\n                                            var data_params = JSON.parse(submisiondate.attr('data-params'));\n                                            var data_name = submisiondate.attr('data-name');\n                                            var data_time = JSON.parse(submisiondate.attr('data-time'));\n                                            extension_new_change_data_form(data_name, data_params, data_time, current_rowid);\n                                        } else {\n                                            submisiondate = $(tmp_node).find('.edit_deadline_extension');\n                                            var data_params = JSON.parse(submisiondate.attr('data-params'));\n                                            var data_name = submisiondate.attr('data-name');\n                                            var data_time = JSON.parse(submisiondate.attr('data-time'));\n                                            extension_edit_change_data_form(data_name, data_params, data_time, current_rowid);\n                                        }\n                                    }\n                                }\n                                else {\n                                    $('#extension-back').prop('disabled', true);\n                                    Modal.create({\n                                        title: datatables_lang_messages.notification_info,\n                                        body: datatables_lang_messages.alert_no_mitigation.replace(/\\_/g, ' '),\n                                        show: true,\n                                        removeOnClose: true,\n                                    });\n                                }\n                            }\n                        }\n                    }\n\n\n                });\n\n                /**\n                 *\n                 * @param {string} data_name\n                 * @param {object} data_params\n                 * @param {string} data_time\n                 * @param {string} current_rowid\n                 */\n                function extension_edit_change_data_form(data_name, data_params, data_time, current_rowid) {\n                    var title = 'Editing the extension for ' + data_name;\n                    var time_content = 'Default deadline: ' + data_time.time_content;\n                    $('#extension-modal-title').html(title);\n                    $('#form-extension').find('input[type=hidden]').val(\"\");\n                    $('#form-extension').find('textarea').val(\"\");\n                    $('#button-id').val(current_rowid);\n                    $('#extension-submissionid').val(data_params.submissionid);\n                    $('#extension-name').val(data_name);\n                    data_params.requesttype = 'edit';\n                    var url = datatables_lang_messages.url_root;\n                    $.ajax({\n                        type: \"GET\",\n                        url: url + \"/mod/coursework/actions/ajax/deadline_extension/edit.php\",\n                        data: data_params,\n                        beforeSend: function() {\n                            change__status_extension_submit_button(true);\n                            $('html, body').css(\"cursor\", \"wait\");\n                            $('.modal-footer').children('img').css('visibility', 'visible');\n                        },\n                        success: function(response) {\n                            var data_response = JSON.parse(response);\n                            $('html, body').css(\"cursor\", \"auto\");\n                            $('.modal-footer').children('img').css('visibility', 'hidden');\n                            if (data_response.error == 1) {\n                                Modal.create({\n                                    title: datatables_lang_messages.notification_info,\n                                    body: data_response.message + ' .Please reload the page!',\n                                    show: true,\n                                    removeOnClose: true,\n                                });\n                            } else {\n                                var extension = data_response.data;\n                                if (extension.time_content) {\n                                    $('#extension-time-content').html(extension.time_content);\n                                } else {\n                                    $('#extension-time-content').html(time_content);\n                                }\n                                document.getElementById('extension-extend-deadline').\n                                    value = data_response.data.time_iso_8601.slice(0, 16);\n                                $('#extension-reason-select').val(extension.pre_defined_reason);\n                                $('#extension-allocatabletype').val(extension.allocatabletype);\n                                $('#extension-allocatableid').val(extension.allocatableid);\n                                $('#extension-courseworkid').val(extension.courseworkid);\n                                $('#extension-id').val(extension.id);\n\n                                $('#id_extra_information').val(extension.text);\n\n                                $('#id_extra_information').prop('disabled', false);\n                                $('#extension-extend-deadline').prop('disabled', false);\n                                $('#extension-reason-select').prop('disabled', false);\n                                save_extension_form_data();\n                            }\n                        },\n                        error: function() {\n                            $('html, body').css(\"cursor\", \"auto\");\n                            change__status_extension_submit_button(false);\n                        },\n                        complete: function() {\n                            $('html, body').css(\"cursor\", \"auto\");\n                            change__status_extension_submit_button(false);\n                        }\n                    });\n                }\n\n                /**\n                 *\n                 * @param {string} data_name\n                 * @param {object} data_params\n                 * @param {string} data_time\n                 * @param {string} current_rowid\n                 */\n                function extension_new_change_data_form(data_name, data_params, data_time, current_rowid) {\n                    var title = 'New extension for ' + data_name;\n                    $('#extension-modal-title').html(title);\n                    $('#form-extension').find('input[type=hidden]').val('');\n                    $('#form-extension').find('textarea').val('');\n\n                    if (data_time.is_have_deadline == '1') {\n                        var url = datatables_lang_messages.url_root;\n                        $.ajax({\n                            type: \"GET\",\n                            url: url + \"/mod/coursework/actions/ajax/deadline_extension/new.php\",\n                            data: data_params,\n                            beforeSend: function() {\n                                change__status_extension_submit_button(true);\n                                $('html, body').css(\"cursor\", \"wait\");\n                                $('.modal-footer').children('img').css('visibility', 'visible');\n                            },\n                            success: function(response) {\n                                $('html, body').css(\"cursor\", \"auto\");\n                                $('.modal-footer').children('img').css('visibility', 'hidden');\n                                var data_response = JSON.parse(response);\n                                $('#extension-time-content').html(data_response.data.time_content);\n                                document.getElementById('extension-extend-deadline').\n                                    value = data_response.data.time_iso_8601.slice(0,16);\n                                save_extension_form_data();\n                            },\n                            error: function() {\n                                $('html, body').css(\"cursor\", \"auto\");\n                            },\n                            complete: function() {\n                                $('html, body').css(\"cursor\", \"auto\");\n                            }\n                        });\n                    } else {\n                        save_extension_form_data();\n                    }\n                    $('#extension-reason-select').val('');\n                    $('#extension-allocatabletype').val(data_params.allocatabletype);\n                    $('#extension-allocatableid').val(data_params.allocatableid);\n                    $('#extension-courseworkid').val(data_params.courseworkid);\n                    $('#extension-submissionid').val(data_params.submissionid);\n                    $('#extension-name').val(data_name);\n                    $('#button-id').val(current_rowid);\n\n                    $('#id_extra_information').prop('disabled', false);\n                    $('#extension-extend-deadline').prop('disabled', false);\n                    $('#extension-reason-select').prop('disabled', false);\n                }\n\n\n                $(\"#form-extension :input\").change(function() {\n                    extension_form_change = true;\n                    change__status_extension_submit_button(false);\n                });\n\n                /**\n                 *\n                 * @param {string} status\n                 */\n                function change__status_extension_submit_button(status) {\n                    $('#extension-submit').prop('disabled', status);\n                }\n\n                /**\n                 *\n                 */\n                function save_extension_form_data() {\n                    extension_form_change = false;\n                }\n\n                /**\n                 *\n                 */\n                function is_data_extension_form_change() {\n                    return extension_form_change;\n                }\n\n                /**\n                 * Feedback\n                 */\n                $('.datatabletest').on('click', '.new_final_feedback, .new_feedback,' +\n                    ' .edit_final_feedback, .edit_feedback, .show_feedback', function(e) {\n                    e.preventDefault();\n                    var url = $(this).attr('href');\n                    $.ajax({\n                        type: \"GET\",\n                        url: url + '&ajax=1'\n                    }).done(function(response) {\n                        response = $.parseJSON(response);\n                        var modalbody = $('#modal-grading').find('.modal-body');\n                        // Careful as not all requests return a response.success value.  Only if it's false, show error.\n                        if ((response.success ?? true) === false && (response.message ?? null)) {\n                            modalbody.html(response.message);\n                        } else {\n                            modalbody.html(response.formhtml);\n                            var filemanager = modalbody.find('.filemanager');\n                            if (response.filemanageroptions && filemanager.length) {\n                                var elementid = filemanager.attr('id');\n                                var clientid = elementid.substr(12);\n                                if (clientid) {\n                                    response.filemanageroptions.client_id = clientid;\n                                    M.form_filemanager.init(Y, response.filemanageroptions);\n                                }\n                            }\n                            if (response.editoroptions) {\n                                require(['editor_tiny/editor'], (Tiny) => {\n                                    Tiny.setupForElementId({\n                                        elementId: 'id_feedbackcomment',\n                                        options: JSON.parse(response.editoroptions),\n                                    });\n                                });\n                            }\n\n                            if (response.commentoptions) {\n                                M.util.js_pending('gradingform_guide/comment_chooser');\n                                require(['gradingform_guide/comment_chooser'], function(amd) {\n                                    $(\".remark\").each(function(i, ele) {\n                                        var buttonele = $(ele).find(\".commentchooser\");\n                                        var textele = $(ele).find(\".markingguideremark\");\n                                        var buttonid = $(buttonele).attr(\"id\");\n                                        var textid = $(textele).attr(\"id\");\n                                        amd.initialise(1, buttonid, textid, response.commentoptions);\n                                        M.util.js_complete('gradingform_guide/comment_chooser');\n\n                                    });\n\n                                });\n                            }\n                        }\n                    });\n                    var cell_td = $(this).closest('td');\n                    var cell_selector = get_td_cell_selector(cell_td);\n                    var cell_type = cell_td.attr('data-class-name');\n                    show_loading_modal_grading(cell_selector, cell_type);\n                });\n\n                /**\n                 *\n                 * @param {object} td_cell\n                 * @returns {string}\n                 */\n                function get_td_cell_selector(td_cell) {\n                    var result = '.' + td_cell.attr('class').replaceAll(' ', '.');\n                    var tr_cell = td_cell.closest('tr');\n                    if (tr_cell.attr('id')) {\n                        result = '#' + tr_cell.attr('id') + ' ' + result;\n                    } else {\n                        result = '.' + tr_cell.attr('class').replaceAll(' ', '.') + ' ' + result;\n                    }\n                    return result;\n                }\n\n                /**\n                 *\n                 * @param {object} cell_selector\n                 * @param {object} cell_type\n                 */\n                function show_loading_modal_grading(cell_selector, cell_type) {\n                    // Set row id.\n                    var modal = $('#modal-grading');\n                    modal.find('#cell_selector').val(cell_selector);\n                    modal.find('#cell_type').val(cell_type);\n                    modal.find('.modal-body').html('<i class=\"fa fa-spin fa-spinner\"></i> loading');\n                    $('#modal-grading').modal('show');\n                }\n\n                $('#modal-grading').on('click', '#id_submitfeedbackbutton, #id_submitbutton', function(e) {\n                    e.preventDefault();\n                    var button = $(this);\n                    button.prop('disabled', true);\n                    var submitbutton = (button.attr('id') == 'id_submitbutton') ? 1 : 0;\n                    var removefeedbackbutton = (button.attr('id') == 'id_removefeedbackbutton') ? 1 : 0;\n                    var submitfeedbackbutton = (button.attr('id') == 'id_submitfeedbackbutton') ? 1 : 0;\n                    var modal = $('#modal-grading');\n                    var url = '/mod/coursework/actions/feedbacks/create.php';\n                    var form_data = modal.find('form').serializeArray();\n                    for (var i = 0, length = form_data.length; i < length; i++) {\n                        if (form_data[i].name == 'feedbackid' && !isNaN(parseInt(form_data[i].value)) &&\n                                form_data[i].value != '0') {\n                            url = '/mod/coursework/actions/feedbacks/update.php';\n                            break;\n                        }\n                    }\n                    var cell_type = modal.find('#cell_type').val();\n                    update_feedback(form_data, url, cell_type, submitbutton, removefeedbackbutton, submitfeedbackbutton, 0, button);\n                    /*\n                    form_data = form_data.concat({name: 'ajax', value: 1},\n                        {name: 'cell_type', value: cell_type},\n                        {name: 'submitbutton', value: submitbutton},\n                        {name: 'removefeedbackbutton', value: removefeedbackbutton});\n                    $.ajax({\n                        type: 'POST',\n                        data: form_data,\n                        url: url,\n                        dataType: 'json'\n                    }).done(function(response) {\n                        console.log(response);\n                        if (response.success) {\n                            var cell_selector = modal.find('#cell_selector').val();\n                            $(cell_selector).html(response.html);\n                            $('#modal-grading').modal('hide');\n                            if (submitbutton == 1) {\n                                alert('Your data has been saved.');\n                            } else {\n                                alert('The feedback has been removed.');\n                            }\n                        } else {\n                            alert('Sorry! There was an error with your request.');\n                        }\n                    }).always(function() {\n                        me.prop('disabled', false);\n                    });*/\n                });\n\n                $('#modal-grading').on('click', '#id_cancel', function(e) {\n                    e.preventDefault();\n                    $('#modal-grading').modal('hide');\n                });\n\n                $('#modal-grading').on('click', '#id_removefeedbackbutton', function(e) {\n                    e.preventDefault();\n                    var button = $(this);\n                    button.prop('disabled', true);\n                    if (confirm('do you want to remove feedback')) {\n                        var submitbutton = (button.attr('id') == 'id_submitbutton') ? 1 : 0;\n                        var removefeedbackbutton = (button.attr('id') == 'id_removefeedbackbutton') ? 1 : 0;\n                        var submitfeedbackbutton = (button.attr('id') == 'id_submitfeedbackbutton') ? 1 : 0;\n                        var modal = $('#modal-grading');\n                        var url = '/mod/coursework/actions/feedbacks/update.php';\n                        var form_data = modal.find('form').serializeArray();\n                        var cell_type = modal.find('#cell_type').val();\n                        update_feedback(form_data, url, cell_type, submitbutton, removefeedbackbutton,\n                            submitfeedbackbutton, 1, button);\n                    }\n                });\n\n                /**\n                 *\n                 * @param {object} form_data\n                 * @param {string} url\n                 * @param {string} celltype\n                 * @param {object} submitbutton\n                 * @param {object} removefeedbackbutton\n                 * @param {object} submitfeedbackbutton\n                 * @param {object} confirm\n                 * @param {object} button\n                 */\n                function update_feedback(form_data, url, celltype, submitbutton, removefeedbackbutton,\n                                         submitfeedbackbutton, confirm, button) {\n\n                    form_data = form_data.concat({name: 'ajax', value: 1},\n                        {name: 'cell_type', value: celltype},\n                        {name: 'submitbutton', value: submitbutton},\n                        {name: 'submitfeedbackbutton', value: submitfeedbackbutton},\n                        {name: 'removefeedbackbutton', value: removefeedbackbutton},\n                        {name: 'confirm', value: confirm});\n\n                    $.ajax({\n                        type: 'POST',\n                        data: form_data,\n                        url: url,\n                        dataType: 'json'\n                    }).done(function(response) {\n                        if ((response.success ?? true) === false && (response.message ?? null)) {\n                            // Could be an error like \"Please provide a valid grade for each criterion\".\n                            $('#modal-grading').find('.modal-body').html(\n                                '<div class=\"alert alert-danger\">' + response.message + '</div>'\n                            );\n                        } else if (response.success) {\n                            var cell_selector = $('#modal-grading').find('#cell_selector').val();\n                            $(cell_selector).html(response.html);\n\n                            if (typeof response.extrahtml !== 'undefined' && response.extrahtml != '') {\n                                $(cell_selector).next('td').html(response.extrahtml);\n                            }\n                            if (typeof response.assessdate !== 'undefined' && response.assessdate != '') {\n                                $(cell_selector).next('td').html(response.assessdate);\n                            }\n\n                            if (typeof response.assessorname !== 'undefined' && response.assessorname != '') {\n                                $(cell_selector).prev('td').html(response.assessorname);\n                            }\n\n                            if (typeof response.assessortwo !== 'undefined' && response.assessortwo != '') {\n                                var tdcell = $(cell_selector).closest('tr').next().find('td')[1];\n                                $(tdcell).html(response.assessortwo);\n                            }\n\n                            if (typeof response.finalhtml !== 'undefined' && response.assessortwo != '') {\n                                var tablerowid = 'allocatable_' + response.allocatableid;\n                                var tdcell2 = $('#' + tablerowid).find('.multiple_agreed_grade_cell')[0];\n                                $(tdcell2).html(response.finalhtml);\n                            }\n                            var datatables_lang_messages_two = JSON.parse($('#datatables_lang_messages').attr('data-lang'));\n                            $('#modal-grading').modal('hide');\n                            if (submitbutton === 1) {\n                                Modal.create({\n                                    title: datatables_lang_messages_two.notification_info,\n                                    body: datatables_lang_messages_two.alert_feedback_save_successful.replace(/\\_/g, ' '),\n                                    show: true,\n                                    removeOnClose: true,\n                                });\n\n                            } else if (submitfeedbackbutton === 1) {\n                                Modal.create({\n                                    title: datatables_lang_messages_two.notification_info,\n                                    body: datatables_lang_messages_two.alert_feedback_draft_save_successful.replace(/\\_/g, ' '),\n                                    show: true,\n                                    removeOnClose: true,\n                                });\n\n                            } else {\n                                Modal.create({\n                                    title: datatables_lang_messages_two.notification_info,\n                                    body: datatables_lang_messages_two.alert_feedback_remove_successful.replace(/\\_/g, ' '),\n                                    show: true,\n                                    removeOnClose: true,\n                                });\n                            }\n                        } else {\n                            Modal.create({\n                                title: datatables_lang_messages_two.notification_info,\n                                body: response.message,\n                                show: true,\n                                removeOnClose: true,\n                            });\n                        }\n                    }).always(function() {\n                        button.prop('disabled', false);\n                    });\n                }\n            });\n        }\n    };\n});\n\n"],"names":["define","$","Notification","Modal","init","compare_row","row","this","DT_RowId","now","Date","extension_form_change","window","addEventListener","table_obj_list","table_id","state","save","document","ready","log_datatable_navigate","tr","row_id","attr","tableid","closest","key","location","href","localStorage","setItem","on","prev","datatables_lang_messages","JSON","parse","extension_edit_change_data_form","data_name","data_params","data_time","current_rowid","title","time_content","html","find","val","submissionid","requesttype","url","url_root","ajax","type","data","beforeSend","change__status_extension_submit_button","css","children","success","response","data_response","error","create","notification_info","body","message","show","removeOnClose","extension","getElementById","value","time_iso_8601","slice","pre_defined_reason","allocatabletype","allocatableid","courseworkid","id","text","prop","save_extension_form_data","complete","extension_new_change_data_form","is_have_deadline","status","is_data_extension_form_change","update_feedback","form_data","celltype","submitbutton","removefeedbackbutton","submitfeedbackbutton","confirm","button","concat","name","dataType","done","cell_selector","extrahtml","next","assessdate","assessorname","assessortwo","tdcell","finalhtml","tablerowid","tdcell2","datatables_lang_messages_two","modal","alert_feedback_save_successful","replace","alert_feedback_draft_save_successful","alert_feedback_remove_successful","always","e","preventDefault","parent","addClass","change_form","data_get","length","form","removeClass","deadline","alert_validate_deadline","param","personal_deadline_time","self","timestamp","Object","keys","invalidate","time","alert_personaldeadline_save_successful","params","extended_deadline","editor","messages","table","current_row_data","submissiondateindex","column","index","current_moderation_cell_data","content","table_row","dom_row","remove","alert_extension_save_successful","M","core","notification_leave_form_title","question","notification_leave_form_message","yesLabel","notification_yes_label","noLabel","notification_no_label","hide","destroy","prev_rowid","current_row_index","current_cell_data","tmp_node","display","submisiondate","alert_no_extension","ordereddata","rows","order","search","toArray","findIndex","alert_no_mitigation","change","parseJSON","modalbody","formhtml","filemanager","filemanageroptions","clientid","substr","client_id","form_filemanager","Y","editoroptions","require","Tiny","setupForElementId","elementId","options","commentoptions","util","js_pending","amd","each","i","ele","buttonele","textele","buttonid","textid","initialise","js_complete","cell_td","cell_type","show_loading_modal_grading","td_cell","result","replaceAll","tr_cell","get_td_cell_selector","serializeArray","isNaN","parseInt"],"mappings":"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"}