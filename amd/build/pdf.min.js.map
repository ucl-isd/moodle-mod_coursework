{"version":3,"file":"pdf.min.js","sources":["../src/pdf.js"],"sourcesContent":["/**\n * PDF viewer logic for mod_coursework.\n *\n * @module     mod_coursework/pdf\n * @copyright  2026 UCL\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Render a specific page of the PDF.\n *\n * @param {Object} pdf\n * @param {Number} pagenum\n * @param {HTMLCanvasElement} canvas\n * @param {Number} scalefactor\n * @returns {Promise}\n */\nconst renderpage = (pdf, pagenum, canvas, scalefactor) => {\n    return pdf.getPage(pagenum).then((page) => {\n        const viewport = page.getViewport({scale: scalefactor});\n        const context = canvas.getContext('2d');\n\n        canvas.height = viewport.height;\n        canvas.width = viewport.width;\n\n        const rendercontext = {\n            canvasContext: context,\n            viewport: viewport\n        };\n        return page.render(rendercontext).promise;\n    }).catch((error) => {\n        // eslint-disable-next-line no-console\n        console.error(\"Catch from pdf.js:\", error);\n    });\n};\n\n/**\n * Initialize the PDF viewer.\n *\n * @param {Object} pdfjsLib\n * @param {String} pdfurl\n */\nexport const init = (pdfjsLib, pdfurl) => {\n    const scalefactor = 1;\n    const viewercontainer = document.getElementById('pdf-viewer');\n\n    if (!viewercontainer || !pdfjsLib) {\n        return;\n    }\n\n    pdfjsLib.getDocument(pdfurl).promise.then((pdfdoc) => {\n        for (let pagenum = 1; pagenum <= pdfdoc.numPages; pagenum++) {\n            const canvas = document.createElement('canvas');\n            viewercontainer.appendChild(canvas);\n            renderpage(pdfdoc, pagenum, canvas, scalefactor);\n        }\n        return pdfdoc;\n    }).catch((error) => {\n        // eslint-disable-next-line no-console\n        console.error(\"Catch from pdf.js:\", error);\n    });\n};"],"names":["renderpage","pdf","pagenum","canvas","scalefactor","getPage","then","page","viewport","getViewport","scale","context","getContext","height","width","rendercontext","canvasContext","render","promise","catch","error","console","pdfjsLib","pdfurl","viewercontainer","document","getElementById","getDocument","pdfdoc","numPages","createElement","appendChild"],"mappings":";;;;;;;;MAiBMA,WAAa,CAACC,IAAKC,QAASC,OAAQC,cAC/BH,IAAII,QAAQH,SAASI,MAAMC,aACxBC,SAAWD,KAAKE,YAAY,CAACC,MAAON,cACpCO,QAAUR,OAAOS,WAAW,MAElCT,OAAOU,OAASL,SAASK,OACzBV,OAAOW,MAAQN,SAASM,YAElBC,cAAgB,CAClBC,cAAeL,QACfH,SAAUA,iBAEPD,KAAKU,OAAOF,eAAeG,WACnCC,OAAOC,QAENC,QAAQD,MAAM,qBAAsBA,wBAUxB,CAACE,SAAUC,gBAErBC,gBAAkBC,SAASC,eAAe,cAE3CF,iBAAoBF,UAIzBA,SAASK,YAAYJ,QAAQL,QAAQZ,MAAMsB,aAClC,IAAI1B,QAAU,EAAGA,SAAW0B,OAAOC,SAAU3B,UAAW,OACnDC,OAASsB,SAASK,cAAc,UACtCN,gBAAgBO,YAAY5B,QAC5BH,WAAW4B,OAAQ1B,QAASC,OAXhB,UAaTyB,UACRT,OAAOC,QAENC,QAAQD,MAAM,qBAAsBA"}