{"version":3,"file":"rubric.min.js","sources":["../src/rubric.js"],"sourcesContent":["/**\n * Rubric labeling logic for mod_coursework.\n *\n * @module     mod_coursework/rubric\n * @copyright  2026 UCL\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {getString} from 'core/str';\n\n/**\n * Initialize the rubric feedback labels.\n */\nexport const init = async() => {\n    // Target the standard Moodle rubric container.\n    const rubric_container = document.querySelector('.gradingform_rubric');\n    if (!rubric_container) {\n        return;\n    }\n\n    try {\n        const feedback_prefix = await getString('feedbackfor', 'mod_coursework');\n\n        // In a rubric, comments are usually in cells with the 'remark' class.\n        const remark_cells = rubric_container.querySelectorAll('td.remark');\n\n        remark_cells.forEach(cell => {\n            const text_area = cell.querySelector('textarea');\n            // In rubrics, the description is usually in the same row (tr).\n            const parent_row = cell.closest('tr');\n            const description_cell = parent_row ? parent_row.querySelector('td.description') : null;\n\n            if (text_area && description_cell) {\n                // Clone the description to strip out extra UI elements.\n                const temp_description = description_cell.cloneNode(true);\n\n                const criterion_name = temp_description.textContent.trim();\n\n                // Create the label.\n                const feedback_label = document.createElement('label');\n                feedback_label.textContent = `${feedback_prefix} ${criterion_name}`;\n\n                if (text_area.id) {\n                    feedback_label.setAttribute('for', text_area.id);\n                }\n\n                // Insert it before the textarea in the remark cell.\n                cell.insertBefore(feedback_label, text_area);\n            }\n        });\n    } catch (error) {\n        // console.error(\"Rubric Labels: Could not load string.\", error);\n    }\n};"],"names":["async","rubric_container","document","querySelector","feedback_prefix","querySelectorAll","forEach","cell","text_area","parent_row","closest","description_cell","criterion_name","cloneNode","textContent","trim","feedback_label","createElement","id","setAttribute","insertBefore","error"],"mappings":"0KAaoBA,gBAEVC,iBAAmBC,SAASC,cAAc,0BAC3CF,2BAKKG,sBAAwB,kBAAU,cAAe,kBAGlCH,iBAAiBI,iBAAiB,aAE1CC,SAAQC,aACXC,UAAYD,KAAKJ,cAAc,YAE/BM,WAAaF,KAAKG,QAAQ,MAC1BC,iBAAmBF,WAAaA,WAAWN,cAAc,kBAAoB,QAE/EK,WAAaG,iBAAkB,OAIzBC,eAFmBD,iBAAiBE,WAAU,GAEZC,YAAYC,OAG9CC,eAAiBd,SAASe,cAAc,SAC9CD,eAAeF,YAAe,GAAEV,mBAAmBQ,iBAE/CJ,UAAUU,IACVF,eAAeG,aAAa,MAAOX,UAAUU,IAIjDX,KAAKa,aAAaJ,eAAgBR,eAG5C,MAAOa"}