{"version":3,"file":"rubric.min.js","sources":["../src/rubric.js"],"sourcesContent":["/**\n * Rubric labeling logic for mod_coursework.\n *\n * @module     mod_coursework/rubric\n * @copyright  2026 UCL\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {getString} from 'core/str';\n\n/**\n * Initialize the rubric feedback labels.\n */\nexport const init = async() => {\n    // Target the standard Moodle rubric container.\n    const rubricContainer = document.querySelector('.gradingform_rubric');\n    if (!rubricContainer) {\n        return;\n    }\n\n    try {\n        const feedbackPrefix = await getString('feedbackfor', 'mod_coursework');\n\n        // In a rubric, comments are usually in cells with the 'remark' class.\n        const remarkCells = rubricContainer.querySelectorAll('td.remark');\n\n        remarkCells.forEach(cell => {\n            const textarea = cell.querySelector('textarea');\n            // In rubrics, the description is usually in the same row (tr).\n            const parentRow = cell.closest('tr');\n            const descriptionCell = parentRow ? parentRow.querySelector('td.description') : null;\n\n            if (textarea && descriptionCell) {\n                // Clone the description to strip out extra UI elements.\n                const tempDescription = descriptionCell.cloneNode(true);\n\n                const criterionName = tempDescription.textContent.trim();\n\n                // Create the label.\n                const feedbackLabel = document.createElement('label');\n                feedbackLabel.textContent = `${feedbackPrefix} ${criterionName}`;\n\n                if (textarea.id) {\n                    feedbackLabel.setAttribute('for', textarea.id);\n                }\n\n                // Insert it before the textarea in the remark cell.\n                cell.insertBefore(feedbackLabel, textarea);\n            }\n        });\n    } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error(\"Catch from rubric.js:\", error);\n    }\n};"],"names":["async","rubricContainer","document","querySelector","feedbackPrefix","querySelectorAll","forEach","cell","textarea","parentRow","closest","descriptionCell","criterionName","cloneNode","textContent","trim","feedbackLabel","createElement","id","setAttribute","insertBefore","error","console"],"mappings":"0KAaoBA,gBAEVC,gBAAkBC,SAASC,cAAc,0BAC1CF,0BAKKG,qBAAuB,kBAAU,cAAe,kBAGlCH,gBAAgBI,iBAAiB,aAEzCC,SAAQC,aACVC,SAAWD,KAAKJ,cAAc,YAE9BM,UAAYF,KAAKG,QAAQ,MACzBC,gBAAkBF,UAAYA,UAAUN,cAAc,kBAAoB,QAE5EK,UAAYG,gBAAiB,OAIvBC,cAFkBD,gBAAgBE,WAAU,GAEZC,YAAYC,OAG5CC,cAAgBd,SAASe,cAAc,SAC7CD,cAAcF,YAAe,GAAEV,kBAAkBQ,gBAE7CJ,SAASU,IACTF,cAAcG,aAAa,MAAOX,SAASU,IAI/CX,KAAKa,aAAaJ,cAAeR,cAG3C,MAAOa,OAELC,QAAQD,MAAM,wBAAyBA"}