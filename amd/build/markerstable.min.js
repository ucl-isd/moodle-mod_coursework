define("mod_coursework/markerstable",["exports","core/ajax","core/toast","jquery","core/notification"],(function(_exports,_ajax,_toast,_jquery,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Javascript module for marker allocation table.
   *
   * @module      mod_coursework/markerstable
   * @copyright   2026 UCL
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_jquery=_interopRequireDefault(_jquery),_notification=_interopRequireDefault(_notification);_exports.init=async()=>{document.querySelectorAll('[data-action="mod_coursework_allocatableinsampletoggle"]').forEach((node=>{node.addEventListener("change",(async event=>{(0,_jquery.default)(event.target).parents("td").find('[data-action="mod_coursework_assessorallocation"]').toggleClass("d-none",!event.target.checked),_ajax.default.call([{methodname:"mod_coursework_allocatableinsampletoggle",args:{courseworkid:event.target.dataset.courseworkid,allocatableid:event.target.dataset.allocatableid,stageidentifier:event.target.dataset.stageidentifier,togglestate:event.target.checked}}])[0].fail(_notification.default.exception)}))})),document.querySelectorAll('[data-action="mod_coursework_allocationpintoggle"]').forEach((node=>{node.addEventListener("change",(async event=>{_ajax.default.call([{methodname:"mod_coursework_allocationpintoggle",args:{courseworkid:event.target.dataset.courseworkid,allocatableid:event.target.dataset.allocatableid,stageidentifier:event.target.dataset.stageidentifier,togglestate:event.target.checked}}])[0].fail(_notification.default.exception)}))})),document.querySelectorAll('[data-action="mod_coursework_assessorallocation"]').forEach((node=>{node.addEventListener("change",(async event=>{_ajax.default.call([{methodname:"mod_coursework_assessorallocation",args:{courseworkid:event.target.dataset.courseworkid,allocatableid:event.target.dataset.allocatableid,stageidentifier:event.target.dataset.stageidentifier,assessorid:event.target.value}}])[0].then((result=>{if(result.success){const allocationpintoggle=(0,_jquery.default)(event.target).parents("td").find('[data-action="mod_coursework_allocationpintoggle"]');return allocationpintoggle.parent().toggleClass("d-none","0"===event.target.value),allocationpintoggle[0].checked="0"!==event.target.value,!0}return event.target.value="0",(0,_toast.add)(result.error,{type:"error"})})).fail(_notification.default.exception)}))}))}}));

//# sourceMappingURL=markerstable.min.js.map