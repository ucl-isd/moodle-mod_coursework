{"version":3,"file":"marking_guide.min.js","sources":["../src/marking_guide.js"],"sourcesContent":["/**\n * Marking guide enhancements for mod_coursework.\n *\n * @module     mod_coursework/marking_guide\n * @copyright  2026 UCL\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {getString} from 'core/str';\n\n/**\n * Initialize the marking guide score field enhancements.\n */\nexport const init = async() => {\n    const rootElement = document.getElementById('coursework-markingform');\n    if (!rootElement) {\n        return;\n    }\n\n    try {\n        // Fetch the \"Mark\" string from lang file.\n        const markLabelText = await getString('mark', 'mod_coursework');\n\n        const scoreCells = rootElement.querySelectorAll('td.score');\n\n        scoreCells.forEach(cell => {\n            const scoreInput = cell.querySelector('input');\n            const maxScoreDiv = cell.querySelector('div');\n\n            if (scoreInput && maxScoreDiv) {\n                // Extract only numbers/decimals from the max score text.\n                const maxScore = maxScoreDiv.textContent.replace(/[^0-9.]/g, '');\n\n                // 1. Enhance the input field.\n                scoreInput.setAttribute('required', 'required');\n                scoreInput.setAttribute('type', 'number');\n                scoreInput.setAttribute('min', '0');\n                scoreInput.setAttribute('step', 'any');\n\n                if (maxScore) {\n                    scoreInput.setAttribute('max', maxScore);\n                }\n\n                // 2. Create and insert the Label.\n                const scoreLabel = document.createElement('label');\n                scoreLabel.textContent = `${markLabelText} (0â€“${maxScore})`;\n\n                if (scoreInput.id) {\n                    scoreLabel.setAttribute('for', scoreInput.id);\n                }\n\n                // Insert at the top of the cell.\n                cell.insertBefore(scoreLabel, cell.firstChild);\n\n                // 3. Clean up the old overhanging div.\n                maxScoreDiv.remove();\n            }\n        });\n    } catch (error) {\n        // console.error(\"Marking Guide: Error enhancing score fields\", error);\n    }\n};"],"names":["async","rootElement","document","getElementById","markLabelText","querySelectorAll","forEach","cell","scoreInput","querySelector","maxScoreDiv","maxScore","textContent","replace","setAttribute","scoreLabel","createElement","id","insertBefore","firstChild","remove","error"],"mappings":"iLAaoBA,gBACVC,YAAcC,SAASC,eAAe,6BACvCF,sBAMKG,oBAAsB,kBAAU,OAAQ,kBAE3BH,YAAYI,iBAAiB,YAErCC,SAAQC,aACTC,WAAaD,KAAKE,cAAc,SAChCC,YAAcH,KAAKE,cAAc,UAEnCD,YAAcE,YAAa,OAErBC,SAAWD,YAAYE,YAAYC,QAAQ,WAAY,IAG7DL,WAAWM,aAAa,WAAY,YACpCN,WAAWM,aAAa,OAAQ,UAChCN,WAAWM,aAAa,MAAO,KAC/BN,WAAWM,aAAa,OAAQ,OAE5BH,UACAH,WAAWM,aAAa,MAAOH,gBAI7BI,WAAab,SAASc,cAAc,SAC1CD,WAAWH,YAAe,GAAER,oBAAoBO,YAE5CH,WAAWS,IACXF,WAAWD,aAAa,MAAON,WAAWS,IAI9CV,KAAKW,aAAaH,WAAYR,KAAKY,YAGnCT,YAAYU,aAGtB,MAAOC"}