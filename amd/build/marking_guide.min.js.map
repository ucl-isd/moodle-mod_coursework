{"version":3,"file":"marking_guide.min.js","sources":["../src/marking_guide.js"],"sourcesContent":["/**\n * Marking guide enhancements for mod_coursework.\n *\n * @module     mod_coursework/marking_guide\n * @copyright  2026 UCL\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {getString} from 'core/str';\n\n/**\n * Initialize the marking guide score field enhancements.\n */\nexport const init = async() => {\n    const root_element = document.getElementById('coursework-markingform');\n    if (!root_element) {\n        return;\n    }\n\n    try {\n        // Fetch the \"Mark\" string from lang file.\n        const mark_label_text = await getString('mark', 'mod_coursework');\n\n        const score_cells = root_element.querySelectorAll('td.score');\n\n        score_cells.forEach(cell => {\n            const score_input = cell.querySelector('input');\n            const max_score_div = cell.querySelector('div');\n\n            if (score_input && max_score_div) {\n                // Extract only numbers/decimals from the max score text.\n                const max_score = max_score_div.textContent.replace(/[^0-9.]/g, '');\n\n                // 1. Enhance the input field.\n                score_input.setAttribute('required', 'required');\n                score_input.setAttribute('type', 'number');\n                score_input.setAttribute('min', '0');\n                score_input.setAttribute('step', 'any');\n\n                if (max_score) {\n                    score_input.setAttribute('max', max_score);\n                }\n\n                // 2. Create and insert the Label.\n                const score_label = document.createElement('label');\n                score_label.textContent = `${mark_label_text} (0â€“${max_score})`;\n\n                if (score_input.id) {\n                    score_label.setAttribute('for', score_input.id);\n                }\n\n                // Insert at the top of the cell.\n                cell.insertBefore(score_label, cell.firstChild);\n\n                // 3. Clean up the old overhanging div.\n                max_score_div.remove();\n            }\n        });\n    } catch (error) {\n        // console.error(\"Marking Guide: Error enhancing score fields\", error);\n    }\n};"],"names":["async","root_element","document","getElementById","mark_label_text","querySelectorAll","forEach","cell","score_input","querySelector","max_score_div","max_score","textContent","replace","setAttribute","score_label","createElement","id","insertBefore","firstChild","remove","error"],"mappings":"iLAaoBA,gBACVC,aAAeC,SAASC,eAAe,6BACxCF,uBAMKG,sBAAwB,kBAAU,OAAQ,kBAE5BH,aAAaI,iBAAiB,YAEtCC,SAAQC,aACVC,YAAcD,KAAKE,cAAc,SACjCC,cAAgBH,KAAKE,cAAc,UAErCD,aAAeE,cAAe,OAExBC,UAAYD,cAAcE,YAAYC,QAAQ,WAAY,IAGhEL,YAAYM,aAAa,WAAY,YACrCN,YAAYM,aAAa,OAAQ,UACjCN,YAAYM,aAAa,MAAO,KAChCN,YAAYM,aAAa,OAAQ,OAE7BH,WACAH,YAAYM,aAAa,MAAOH,iBAI9BI,YAAcb,SAASc,cAAc,SAC3CD,YAAYH,YAAe,GAAER,sBAAsBO,aAE/CH,YAAYS,IACZF,YAAYD,aAAa,MAAON,YAAYS,IAIhDV,KAAKW,aAAaH,YAAaR,KAAKY,YAGpCT,cAAcU,aAGxB,MAAOC"}