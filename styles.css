/**
Coursework.
**/

.path-mod-coursework {
    /* Hide activity header - date and description displayed differently. */
    .activity-header {
        display: none !important;
    }

    /* SHAME - not able to add btn-block in php. */
    #coursework-finalise-submission .btn {
        display: block !important;
        width: 100%;
    }

    /* Plagiarism in table submissions col. */
    .mod-coursework-submissions-submission-col .core_plagiarism_links {
        display: block;
        padding: .5rem;
        margin-top: .5rem;
        background-color: var(--light);

        .tii_links_container {
            padding: 0;

            /* Hide icon. */
            img[src*="turnitin-icon"] {
                display: none;
            }

            .turnitin_status {
                font-size: small;
            }

            /* Resubmit - style as link. */
            [id^=pp_resubmit] {
                color: var(--primary);
                &:hover {
                    text-decoration: underline;
                }
            }
        }
    }

    /* Actions menu dropdown dividers. */
    .mod-coursework-submissions-action-col .dropdown-menu {
        /* Hide any hanging dividers. */
        .dropdown-divider:last-of-type,
        .dropdown-divider + .dropdown-divider {
            display: none;
        }
    }

    /* Marking form and student feedback. */
    #coursework-markingform,
    .coursework-feedback {
        /* Full width cols. */
        div.col-md-3,
        div.col-md-9 {
            max-width: 100%;
            flex: 0 0 100%;
        }
        .col-form-label {
            font-weight: bold;
        }

        /* Grading tables. */
        .gradingform_guide,
        .gradingform_rubric {

            /* SHAME - overwrite rubric table paddings. */
            table {
                th,
                td {
                    padding: .75rem !important
                }
            }
            .criterion.even,
            .criterion.even td {
                background-color: transparent;
            }
            .criteria {
                height: auto;
            }
            .criterionshortname,
            label {
                font-weight: normal;
            }
            .score {
                text-align: right;
            }
        }

        /* Rubric specific. */
        .gradingform_rubric {
            .radio {
                display: block !important;
            }
            td,
            tr {
                border: 0 !important;
            }
            .criterion {
                .description {
                    font-size: 1.3rem;
                    padding: 1rem 0;
                }
                /* Full width td. */
                .description,
                .levels {
                    width: 100%;
                    display: block;
                    max-width: none;
                    /* Inner table of rubric text. */
                    table {
                        width: 100%;
                        table-layout: fixed;
                        td.level {
                            width: auto !important;
                            transition: all 1s;
                            /* Previously selected rubric option. */
                            &.currentchecked {
                                color: var(--dark);
                                background-color: color-mix(in srgb, var(--primary) 10%, white 90%);
                            }
                            /* Selected rubric option. */
                            &.checked{
                                color: white;
                                border-color: var(--primary) !important;
                                background-color: var(--primary) !important;

                            }
                        }
                    }
                }
            }
        }

        /* Editing rubric. */
        .gradingform_rubric.editable {
            /* Hover state. */
            td.level:hover {
                border-color: var(--primary) !important;
                background-color: var(--primary) !important;
                color: white;
            }
        }

        /* Ugly checkbox in marking form. */
        .showmarkerdesc,
        .showstudentdesc {
            display: block;
            width: 100%;

            label {
                display: block;
            }
        }
    }
    .coursework-feedback {
        /* General bubble styles (same as before, but added a top-left class for clarity) */
        .chat-bubble-bordered {
            position: relative;
            background-color: white;
            border: 2px solid var(--primary);
            box-shadow: .3em .3em 0 0 var(--primary);
            padding: 1.5rem;
            margin-top: 25px; /* Added space at the top for the arrow */
        }

        /* Specific styles for the top-left arrow */
        .chat-bubble-bordered::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 1rem solid transparent;  /* Base of the outer triangle */
            border-right: 1rem solid transparent; /* Base of the outer triangle */
            border-bottom: 1.1rem solid var(--primary); /* Color of the border, pointing up */
            top: -18px; /* Position above the bubble, accounting for border and triangle height */
            left: 1rem; /* Horizontal position from the left */
            z-index: 1;
        }

        .chat-bubble-bordered::after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 1rem solid transparent;  /* Slightly smaller base for inner triangle */
            border-right: 1rem solid transparent; /* Slightly smaller base for inner triangle */
            border-bottom: 1.1rem solid white; /* Match the body background to "cut out" */
            top: -15px; /* Position relative to the outer triangle */
            left: 1rem; /* Horizontal position, slightly offset to match outer */
            z-index: 2;
        }
    }
}
